<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Neighbourhood Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,500" rel="stylesheet">
    <!-- build:css css/styles.css-->
    <link rel="stylesheet" href="../bower_components/normalize-css/normalize.css">
    <link rel="stylesheet" href="css/styles.css">
    <!-- endbuild -->
</head>

<body>
    <main class="container">
        <!-- Tab Navigation -->
        <nav data-bind="with: sectionVM">
            <ul class="tab-list" data-bind="foreach: sections">
                <li id="search" class="tab" data-bind="css: {active: $data == $parent.chosenSection()}, text:name, click: $parent.activateSection"></li>
            </ul>
        </nav>
        <!-- Tab Content -->
        <section>
            <!-- Venue Content -->
            <article id="venueView" class="content" data-bind="css: {reveal: sectionVM.showContent($element.id)}">
                <div class="row">
                    <div class="col-one" data-bind="with: searchVM">
                        <form class="search-container" data-bind="submit:returnSearchItem">
                            <div class="searchbar">
                                <input class="search" data-bind="textInput: searchTerm" type="text" id="searchbar" placeholder="Search" aria-label="Search through site content" autocomplete="off">
                                <i class="fa fa-times-circle" aria-hidden="true" data-bind="click:clearSearch, visible: searchTerm() !== ''"></i>
                            </div>
                            <label class="label" for="searchbar" data-bind="text:searchMessage"></label>
                        </form>
                    </div>
                </div>
                <div class="row">
                    <div class="col-one" data-bind="with: searchVM">
                        <ul data-bind="foreach: filteredItems" class="venue-list">
                            <li class="list-item box" data-bind="click: $root.venueVM.showLocation">
                                <a class="title" data-bind="text:name, attr:{href:url}"></a>
                                <div class="tag-box" data-bind="foreach:tag">
                                    <span class="tag" data-bind="text:$data"></span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </article>
            <!-- Map Content -->
            <article id="mapView" class="content map-article" data-bind="css: {reveal: sectionVM.showContent($element.id)}">
                <div class="row map-row">
                    <div class="col-one map-col" data-bind="with: $root.mapVM">
                        <div id="map" data-bind="visible: mapElem">
                        </div>
                        <div class="error-box" data-bind="visible:!mapElem()">
                            <h1>Google Maps cannot be loaded</h1>
                            <p>In the meantime, feel free to take a peek at our selected venues by visiting the venues tab. Each listing links to the venue's website.</p>
                        </div>
                    </div>
                </div>
            </article>
        </section>
    </main>
    <!-- build:js js/libs.js -->
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../bower_components/knockout/dist/knockout.js"></script>
    <!-- endbuild -->
    <!-- Asnyc load Font Awesome -->
    <script src="https://use.fontawesome.com/be5de5c037.js"></script>
    <!-- build:js js/app.js -->
    <script src="js/data.js"></script>
    <script src="js/viewmodels/map.js"></script>
    <script src="js/viewmodels/section.js"></script>
    <script src="js/viewmodels/venue.js"></script>
    <script src="js/viewmodels/search.js"></script>
    <script src="js/viewmodels/viewmodel.js"></script>
    <!-- endbuild -->
    <!-- Asnyc Google Map request -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC8oKS2QngD-5FlY_uc9gIz-Lb0wggu_6Y&callback=app.vm.mapVM.init" onerror="app.vm.mapVM.mapError()"></script>
</body>

</html>