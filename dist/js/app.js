!function(e,a){"use strict";e.initialPOI=[{name:"Dianabad",location:{lat:48.214209,lng:16.377812},address:"Lilienbrunngasse 7-9",postalCode:"1020",url:"http://www.dianabad.at/",foursquareID:"4c8df3ce58668cfa9a96cdec",tag:["#pirates","#mermaids"]},{name:"Haus des Meeres - Aqua Terra Zoo",location:{lat:48.197731,lng:16.352923},address:"Fritz-Grünbaum-Platz 1",postalCode:"1060",url:"https://www.haus-des-meeres.at/",foursquareID:"4b7cf243f964a52002aa2fe3",tag:["#marine biologists","#crocodile hunters"]},{name:"Haus der Musik",location:{lat:48.203787,lng:16.373061},address:"Seilerstätte 30",postalCode:"1010",url:"http://www.hausdermusik.com/",foursquareID:"4b058895f964a520f5ce22e3",tag:["#mini mozarts","#rockstars"]},{name:"Zoom Kindermuseum",location:{lat:48.202336,lng:16.359377},address:"Museumsplatz 1",postalCode:"1070",url:"https://www.kindermuseum.at/en",foursquareID:"4bd68e887b1876b03abf8c86",tag:["#tinkerers","#artists"]},{name:"Palmenhaus Schönbrunn",location:{lat:48.18455,lng:16.302921},address:"Schlosspark Schönbrunn",postalCode:"1130",url:"https://www.schoenbrunn.at/ueber-schoenbrunn/schlosspark/rundgang/palmenhaus/",foursquareID:"4d7ce2a38f89224bcaf4ab26",tag:["#hobby gardeners","#botanists"]},{name:"Figurentheater Lilarum",location:{lat:48.20077,lng:16.399158},address:"Göllnergasse 8",postalCode:"1030",url:"http://lilarum.at/",foursquareID:"4b7e696cf964a52009ec2fe3",tag:["#puppeteers","#cabaret artists"]},{name:"Schmetterlinghaus im Burggarten",location:{lat:48.205378,lng:16.366604},address:"Palmenhaus Burggarten Hofburg",postalCode:"1010",url:"http://www.schmetterlinghaus.at/",foursquareID:"4edf58459adf1692b4aa18a1",tag:["#butterflies","#biologists"]},{name:"wienXtra-cinemagic Kinderkino",location:{lat:48.211406,lng:16.383912},address:"Uraniastrasse 1",postalCode:"1010",url:"http://www.wienxtra.at/cinemagic/",foursquareID:"4c9a689e971676b0de2055e2",tag:["#film critics","#movie stars"]},{name:"Dschungel Vienna",location:{lat:48.202419,lng:16.36022},address:"Museumsplatz 1",postalCode:"1070",url:"https://www.dschungelwien.at/",foursquareID:"4b87979af964a520acc331e3",tag:["#drama queens","#drama kings"]},{name:"Technisches Museum Wien",location:{lat:48.190902,lng:16.318252},address:"Mariahilfer Strasse 212",postalCode:"1140",url:"https://www.technischesmuseum.at/",foursquareID:"4b058894f964a520d5ce22e3",tag:["#engineers","#scientists"]},{name:"Naturhistorisches Museum",location:{lat:48.205276,lng:16.359845},address:"Burgring 7",postalCode:"1010",url:"http://www.nhm-wien.ac.at/en",foursquareID:"4b1699f8f964a520c5ba23e3",tag:["#dinosaur fans","#history buffs"]}]}(window.app=window.app||{}),function(e,a){"use strict";var n=function(){console.log("MapVM");var a=this;a.init=function(){a.mapDiv=document.getElementById("map"),a.vienna={lat:48.2082,lng:16.3738},a.map=new google.maps.Map(a.mapDiv,{center:a.vienna,zoom:13,mapTypeControl:!1}),a.renderTransitLayer(a.map),a.infowindow=new google.maps.InfoWindow({maxWidth:300}),a.renderMarkers(e.vm.searchVM.filteredItems()),google.maps.event.addDomListener(window,"resize",a.resizeMap)},a.renderMarkers=function(e){e.forEach(function(e){var n=new google.maps.Marker({position:new google.maps.LatLng(e.location.lat,e.location.lng),map:a.map,title:e.name,id:e.foursquareID,animation:google.maps.Animation.DROP});e.marker=n,n.addListener("click",function(){a.toggleBounceMarker(this),a.populateInfowindow(this,a.infowindow,e)}),(new google.maps.LatLngBounds).extend(n.position)})},a.renderTransitLayer=function(e){a.transitLayer=new google.maps.TransitLayer,a.transitLayer.setMap(e)},a.toggleBounceMarker=function(e){null!==e.getAnimation()?e.setAnimation(null):(e.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},1500))},a.showMarker=function(e){e&&e.setVisible(!0)},a.hideMarker=function(e){e&&e.setVisible(!1)},a.openInfoWindow=function(e,n){a.infowindow.open(a.map,n)},a.closeInfoWindow=function(){a.infowindow.close()},a.getAJAXdata=function(e){var a="https://api.foursquare.com/v2/venues/"+e.foursquareID;return $.ajax({url:a,dataType:"jsonp",data:{client_id:"V3SD0U1WAIJOPXUK4W2AR0DPZXUKFQQL5Y2FXKK4YO25FVX0",client_secret:"NEH1GYLAFDS2CL5DSBFRO3DENB55KPWAVJE5ERBWQ1MGLD0X",v:"20170801"}})},a.fetchData=function(e){var a=e.response.venue,n={};return n.url=a.canonicalUrl?a.canonicalUrl:"#",n.name=a.name?a.name:"Name not provided",n.address=a.location.address?a.location.address:"Address not provided",n.postalCode=a.location.postalCode?a.location.postalCode:"Zipcode not provided",n.city=a.location.city?a.location.city:"City not provided",n.hours=a.popular?a.popular.timeframes[0].open[0].renderedTime:"Hours not provided",n},a.buildString=function(e){var a='<article class="infowindow-text"><h2><a class="venue-link" href='+e.url+">"+e.name+'</h2></a><div class="contact-box"><i class="fa fa-map-marker" aria-hidden="true"></i><address>'+e.address+", "+e.postalCode+" "+e.city+'</address></div><div class="time-box"><i class="fa fa-clock-o" aria-hidden="true"></i><p> Today: '+e.hours+"</p></div></article>";return[a,a+'<div class="image-box"><img class="foursquare-img" src="images/foursquare.png"></div>']},a.successCallback=function(e){var n=a.fetchData(e),t=a.buildString(n)[1];a.infowindow.setContent(t)},a.failCallback=function(e){var n=a.buildString(e)[0];a.infowindow.setContent(n)},a.populateInfowindow=function(e,n,t){a.infowindow.setContent("Fetching.."),a.getAJAXdata(t).done(function(e){a.successCallback(e)}),a.getAJAXdata(t).fail(function(){a.failCallback(t)}),a.openInfoWindow(a.map,e),a.infowindow.addListener("closeclick",a.closeInfoWindow)},a.resizeMap=function(){var e=a.map.getCenter();google.maps.event.trigger(a.map,"resize"),a.map.setCenter(e)},a.mapElem=ko.observable(!0),a.mapError=function(){a.mapElem(!1)}};e.mapvm=new n}(window.app=window.app||{}),function(e,a){"use strict";ko.bindingHandlers.fadeVisible={init:function(e,a){var n=a();$(e).toggle(ko.unwrap(n))},update:function(e,a){var n=a();ko.unwrap(n)?$(e).fadeIn("fast"):$(e).fadeOut("fast")}};var n=function(e,a){this.name=e,this.id=a},t=function(){var a=this;console.log("SectionVM"),a.sections=ko.observableArray([new n("Search Venues","venueView"),new n("Map","mapView")]),a.chosenSection=ko.observable(a.sections()[1]),a.activateSection=function(n){a.chosenSection(n),"Map"===a.chosenSection().name&&e.mapvm.resizeMap()},a.showContent=function(e){return e===a.chosenSection().id}};e.sectionvm=new t}(window.app=window.app||{}),function(e,a){"use strict";var n=function(e){this.name=e.name,this.location={lat:e.location.lat,lng:e.location.lng},this.address=e.address,this.postalCode=e.postalCode,this.city="Vienna",this.hours="Check website",this.url=e.url,this.foursquareID=e.foursquareID,this.marker="",this.tag=e.tag},t=function(){var a=this;console.log("VenueVM"),a.attractionList=ko.observableArray(ko.utils.arrayMap(e.initialPOI,function(e){return new n(e)})),a.showLocation=function(a){if(!e.mapvm.mapElem())return!0;var n=a.marker;e.sectionvm.activateSection(e.sectionvm.sections()[1]),google.maps.event.trigger(n,"click")}};e.venuevm=new t}(window.app=window.app||{}),function(e,a){"use strict";var n=function(){var a=this;console.log("SearchVM"),a.searchTerm=ko.observable(""),a.clearSearch=function(){return a.searchTerm("")},a.filteredItems=ko.computed(function(){var n=a.searchTerm().toLowerCase();return ko.utils.arrayFilter(e.venuevm.attractionList(),function(a){return a.name.toLowerCase().indexOf(n)>=0?(e.mapvm.mapElem()&&e.mapvm.showMarker(a.marker),!0):(e.mapvm.mapElem()&&(e.mapvm.infowindow.close(),e.mapvm.hideMarker(a.marker)),!1)})},a),a.returnSearchItem=function(){var n;if(1!==a.filteredItems().length)return null;n=a.filteredItems()[0],e.venuevm.showLocation(n)},a.searchLabel=ko.observable(""),a.searchMessage=ko.computed(function(){return 0===a.filteredItems().length?"Sorry, no matches. Try again.":"Filter destinations by venue name"},a),a.cancelBtn=ko.observable(),a.showBtn=ko.computed(function(){""===a.searchTerm()?a.cancelBtn(!1):a.cancelBtn(!0)})};e.searchvm=new n}(window.app=window.app||{}),function(e,a){"use strict";var n=function(){console.log("ViewModel"),this.mapVM=e.mapvm,this.sectionVM=e.sectionvm,this.venueVM=e.venuevm,this.searchVM=e.searchvm};e.vm=new n,$(function(){console.log("DOM Content Loaded"),ko.applyBindings(e.vm)})}(window.app=window.app||{});
//# sourceMappingURL=../maps/js/app.js.map
